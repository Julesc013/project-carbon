spec_version: 1.0
name: tiers
description: Compatibility tier ladders for Project Carbon.
revision: v1.1.0
created: 2025-12-24
stable: true

presentation_model:
  name: presented_tier
  description: Reported tier value exposed to software for compatibility decisions.
  rules:
    - Presented tier is reported by discovery, even if internal implementation is a superset.
    - Optional or undocumented behaviors are reported via feature bits, not by elevating the tier.
    - Reset always starts in P0 for every ladder.
    - Tier changes only via MODEUP(target_tier, entry_vector) and RETMD().

ladders:
  - id: TIER_LADDER_Z80
    value: 0
    name: z80_derived
    description: Unified 8080-derived compatibility ladder.
    reset_default: P0
    upgrade_rule: target_tier > current_tier
    downgrade_rule: only via RETMD
    tiers:
      - id: P0
        value: 0
        mnemonic: I8080
        label: 8080
        strict: true
      - id: P1
        value: 1
        mnemonic: I8085
        label: 8085
        strict: true
      - id: P2
        value: 2
        mnemonic: Z80
        label: z80
        strict: true
      - id: P3
        value: 3
        mnemonic: Z180
        label: z180
        strict: true
      - id: P4
        value: 4
        mnemonic: EZ80
        label: eZ80 (ADL/24-bit)
        strict: true
      - id: P5
        value: 5
        mnemonic: Z280
        label: z280
        strict: true
      - id: P6
        value: 6
        mnemonic: Z380
        label: z380
        strict: true
      - id: P7
        value: 7
        mnemonic: Z480
        label: z480
        strict: true
    presentation_overrides:
      - part: Z85
        presents_as: P2
        feature_bits: [Z85_UNDOC_Z80]
        description: Z85 presents as Z80 (P2) while exposing undocumented Z80 behaviors via feature bits.
      - part: Z90
        presents_as: P3
        feature_bits: [Z90_Z180_CLASS]
        description: Z90 presents as Z180-compatible (P3).
      - part: Z380
        presents_as: P6
        feature_bits: [Z380_32BIT_EXTENDED]
        description: Z380 presents as P6 and advertises 32-bit extensions via feature bits.
      - part: Z480
        presents_as: P7
        feature_bits: [Z480_NATIVE_64]
        description: Z480 presents as P7 and advertises native 64-bit mode via feature bits.
    reserved_tier_values:
      - range: [8, 15]
        description: Reserved (P8-P15).
      - range: [16, 255]
        description: Reserved for future tier extensions.

  - id: TIER_LADDER_AM95
    value: 1
    name: am95xx_fpu
    description: Am95xx FPU compatibility ladder (Am9511 lineage).
    reset_default: P0
    upgrade_rule: target_tier > current_tier
    downgrade_rule: only via RETMD
    tiers:
      - id: P0
        value: 0
        mnemonic: AM9511
        label: am9511
        strict: true
      - id: P1
        value: 1
        mnemonic: AM9512_PLUS
        label: am9512-plus
        notes: IEEE FP32/FP64 and restored Am9511 functions.
        strict: true
      - id: P2
        value: 2
        mnemonic: AM9513
        label: am9513
        notes: Native async scalar IEEE engine; CAI-native.
        strict: true
      - id: P3
        value: 3
        mnemonic: AM9514
        label: am9514
        notes: Vector/SIMD math tier.
        strict: true
      - id: P4
        value: 4
        mnemonic: AM9515
        label: am9515
        notes: Matrix/tensor math tier.
        strict: true
    presentation_overrides:
      - part: AM9512_PLUS
        presents_as: P1
        feature_bits: [AM9512_IEEE_PLUS]
        description: Am9512-plus presents as P1 and advertises IEEE additions via feature bits.
      - part: AM9513
        presents_as: P2
        feature_bits: [AM9513_ASYNC_SCALAR]
        description: Am9513 presents as P2 and advertises async scalar capability via feature bits.
      - part: AM9514
        presents_as: P3
        feature_bits: [AM9514_VECTOR]
        description: Am9514 presents as P3 and advertises vector capability via feature bits.
      - part: AM9515
        presents_as: P4
        feature_bits: [AM9515_TENSOR]
        description: Am9515 presents as P4 and advertises tensor capability via feature bits.
    reserved_tier_values:
      - range: [5, 15]
        description: Reserved (P5-P15).
      - range: [16, 255]
        description: Reserved for future tier extensions.

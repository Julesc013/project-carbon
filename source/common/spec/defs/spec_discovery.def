SPEC DISCOVERY 1 0
MAGIC MAGIC_BSP_ANCHOR 0x50534243
CONST BSP_ANCHOR_V1_VERSION 1
STRUCT BSP_ANCHOR_V1 24 4
FIELD BSP_ANCHOR_V1 SIGNATURE 0 4
FIELD BSP_ANCHOR_V1 VERSION 4 2
FIELD BSP_ANCHOR_V1 SIZE_BYTES 6 2
FIELD BSP_ANCHOR_V1 DISCOVERY_PTR 8 8
FIELD BSP_ANCHOR_V1 RESERVED0 16 8

MAGIC MAGIC_DISCOVERY_TABLE 0x43534443
CONST DISCOVERY_TABLE_V1_VERSION 1
CONST DISCOVERY_TABLE_V1_SIZE 64
STRUCT DISCOVERY_TABLE_V1 64 4
FIELD DISCOVERY_TABLE_V1 SIGNATURE 0 4
FIELD DISCOVERY_TABLE_V1 TABLE_VERSION 4 2
FIELD DISCOVERY_TABLE_V1 TABLE_SIZE 6 2
FIELD DISCOVERY_TABLE_V1 CPU_LADDER_ID 8 1
FIELD DISCOVERY_TABLE_V1 FPU_LADDER_ID 9 1
FIELD DISCOVERY_TABLE_V1 PRESENTED_CPU_TIER 10 1
FIELD DISCOVERY_TABLE_V1 PRESENTED_FPU_TIER 11 1
FIELD DISCOVERY_TABLE_V1 PROFILE_ID 12 1
FIELD DISCOVERY_TABLE_V1 RESERVED0 13 3
FIELD DISCOVERY_TABLE_V1 TOPOLOGY_TABLE_PTR 16 8
FIELD DISCOVERY_TABLE_V1 BDT_PTR 24 8
FIELD DISCOVERY_TABLE_V1 LIMITS_TABLE_PTR 32 8
FIELD DISCOVERY_TABLE_V1 CPU_FEATURE_BITMAP_PTR 40 8
FIELD DISCOVERY_TABLE_V1 FPU_FEATURE_BITMAP_PTR 48 8
FIELD DISCOVERY_TABLE_V1 PERIPHERAL_FEATURE_BITMAP_PTR 56 8

CONST LIMITS_TABLE_V1_VERSION 1
CONST LIMITS_TABLE_V1_SIZE 32
STRUCT LIMITS_TABLE_V1 32 4
FIELD LIMITS_TABLE_V1 QUEUE_SUBMIT_DEPTH 0 4
FIELD LIMITS_TABLE_V1 QUEUE_COMPLETE_DEPTH 4 4
FIELD LIMITS_TABLE_V1 CONTEXTS 8 2
FIELD LIMITS_TABLE_V1 VECTOR_LANES 10 2
FIELD LIMITS_TABLE_V1 TENSOR_RANK 12 2
FIELD LIMITS_TABLE_V1 RESERVED0 14 2
FIELD LIMITS_TABLE_V1 MAX_CORES 16 2
FIELD LIMITS_TABLE_V1 MAX_THREADS 18 2
FIELD LIMITS_TABLE_V1 RESERVED1 20 12

STRUCT FEATURE_BITMAP_V1 16 4
FIELD FEATURE_BITMAP_V1 WORD0 0 4
FIELD FEATURE_BITMAP_V1 WORD1 4 4
FIELD FEATURE_BITMAP_V1 WORD2 8 4
FIELD FEATURE_BITMAP_V1 WORD3 12 4

ENUM CPUID_LEAF VENDOR 0x00000000
ENUM CPUID_LEAF ID 0x00000001
ENUM CPUID_LEAF DISCOVERY 0x00000002
ENUM CPUID_LEAF FEATURES0 0x00000003
ENUM CPUID_LEAF DEVICE_TABLE 0x00000004
ENUM CPUID_LEAF FEATURES1 0x00000005
ENUM CPUID_LEAF FEATURES2 0x00000006
ENUM CPUID_LEAF CACHE0 0x00000010
ENUM CPUID_LEAF TOPOLOGY 0x00000011
ENUM CPUID_LEAF ACCEL0 0x00000020
ENUM CPUID_LEAF ERRATA0 0x00000030

BIT CPU_FEAT MODE_SWITCH 0
BIT CPU_FEAT CSR_NAMESPACE 1
BIT CPU_FEAT FABRIC 2
BIT CPU_FEAT CPUID 3
BIT CPU_FEAT CAPS 4
BIT CPU_FEAT Z85_UNDOC_Z80 5
BIT CPU_FEAT Z90_Z180_CLASS 6
BIT CPU_FEAT Z380_32BIT_EXTENDED 7
BIT CPU_FEAT Z480_NATIVE_64 8

BIT FPU_FEAT AM9512_IEEE_PLUS 0
BIT FPU_FEAT AM9513_ASYNC_SCALAR 1
BIT FPU_FEAT AM9514_VECTOR 2
BIT FPU_FEAT AM9515_TENSOR 3

BIT PERIPH_FEAT CAI 0
BIT PERIPH_FEAT BDT 1
BIT PERIPH_FEAT DEVICE_MODEL 2
BIT PERIPH_FEAT NON_COHERENT_DMA 3
BIT PERIPH_FEAT COHERENT_DMA_OPTIONAL 4
BIT PERIPH_FEAT HAS_V86 5
BIT PERIPH_FEAT HAS_ROMWBW 6
BIT PERIPH_FEAT HAS_LOCAL_VIDEO 7
BIT PERIPH_FEAT HAS_PAGING 8
BIT PERIPH_FEAT HAS_IRQ 9

SPEC FS_CPMX 1 0
MAGIC MAGIC_CPMX 0x584D5043
CONST CPMX_SUPERBLOCK_V1_VERSION 1
CONST CPMX_SUPERBLOCK_V1_SIZE 64
CONST CPMX_DIR_ENTRY_V1_SIZE 32
CONST CPMX_USER_FREE 0xE5

BIT CPMX_FLAGS READ_ONLY 0
BIT CPMX_FLAGS SYSTEM 1

STRUCT CPMX_SUPERBLOCK_V1 64 4
FIELD CPMX_SUPERBLOCK_V1 SIGNATURE 0 4
FIELD CPMX_SUPERBLOCK_V1 VERSION 4 2
FIELD CPMX_SUPERBLOCK_V1 SIZE_BYTES 6 2
FIELD CPMX_SUPERBLOCK_V1 SECTOR_SIZE 8 2
FIELD CPMX_SUPERBLOCK_V1 SECTORS_PER_BLOCK 10 2
FIELD CPMX_SUPERBLOCK_V1 DIR_ENTRY_COUNT 12 2
FIELD CPMX_SUPERBLOCK_V1 RESERVED0 14 2
FIELD CPMX_SUPERBLOCK_V1 TOTAL_SECTORS 16 4
FIELD CPMX_SUPERBLOCK_V1 DIR_START_LBA 20 4
FIELD CPMX_SUPERBLOCK_V1 DATA_START_LBA 24 4
FIELD CPMX_SUPERBLOCK_V1 ALLOC_BLOCK_COUNT 28 4
FIELD CPMX_SUPERBLOCK_V1 VOLUME_ID 32 4
FIELD CPMX_SUPERBLOCK_V1 FLAGS 36 4
FIELD CPMX_SUPERBLOCK_V1 CRC32 40 4
FIELD CPMX_SUPERBLOCK_V1 RESERVED1 44 4
FIELD CPMX_SUPERBLOCK_V1 RESERVED2 48 16

STRUCT CPMX_DIR_ENTRY_V1 32 2
FIELD CPMX_DIR_ENTRY_V1 USER 0 1
FIELD CPMX_DIR_ENTRY_V1 NAME 1 8
FIELD CPMX_DIR_ENTRY_V1 EXT 9 3
FIELD CPMX_DIR_ENTRY_V1 FLAGS 12 1
FIELD CPMX_DIR_ENTRY_V1 EXTENT 13 1
FIELD CPMX_DIR_ENTRY_V1 RESERVED0 14 1
FIELD CPMX_DIR_ENTRY_V1 RECORD_COUNT 15 1
FIELD CPMX_DIR_ENTRY_V1 BLOCK_PTRS 16 16

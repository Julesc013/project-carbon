SPEC BDT 1 0
MAGIC MAGIC_BDT 0x54444243
CONST BDT_HEADER_V1_VERSION 1
CONST BDT_HEADER_V1_SIZE 16
CONST BDT_ENTRY_V1_VERSION 1
CONST BDT_ENTRY_V1_SIZE 64
CONST BDT_IRQ_ROUTE_V1_SIZE 8
CONST BDT_FOOTER_V1_SIZE 4
CONST BDT_EMPTY_CRC32 0x52BB291E

ENUM DEVCLASS CPU 0x0001
ENUM DEVCLASS ACCEL 0x0002
ENUM DEVCLASS UART 0x0010
ENUM DEVCLASS PIO 0x0012
ENUM DEVCLASS TIMER 0x0013
ENUM DEVCLASS PIC 0x0014
ENUM DEVCLASS DMA 0x0020
ENUM DEVCLASS STORAGE 0x0030

BIT BDT_CAPS MMIO 0
BIT BDT_CAPS IO 1

BIT DEV_COMPAT POLLING 0
BIT DEV_COMPAT IRQ 1
BIT DEV_COMPAT PORT_IO 2
BIT DEV_COMPAT MMIO 3
BIT DEV_COMPAT WAIT 4

BIT DEV_TURBO QUEUE 0
BIT DEV_TURBO DMA 1
BIT DEV_TURBO TIMESTAMPS 2
BIT DEV_TURBO PERF 3
BIT DEV_TURBO WATERMARK_IRQ 4

STRUCT BDT_HEADER_V1 16 4
FIELD BDT_HEADER_V1 SIGNATURE 0 4
FIELD BDT_HEADER_V1 HEADER_VERSION 4 2
FIELD BDT_HEADER_V1 HEADER_SIZE 6 2
FIELD BDT_HEADER_V1 ENTRY_SIZE 8 2
FIELD BDT_HEADER_V1 ENTRY_COUNT 10 2
FIELD BDT_HEADER_V1 TOTAL_SIZE 12 4

STRUCT BDT_ENTRY_V1 64 4
FIELD BDT_ENTRY_V1 DESC_VERSION 0 2
FIELD BDT_ENTRY_V1 DESC_SIZE_BYTES 2 2
FIELD BDT_ENTRY_V1 CLASS_ID 4 2
FIELD BDT_ENTRY_V1 SUBCLASS_ID 6 2
FIELD BDT_ENTRY_V1 INSTANCE_ID 8 2
FIELD BDT_ENTRY_V1 DEVICE_VERSION 10 2
FIELD BDT_ENTRY_V1 CAPS0 12 4
FIELD BDT_ENTRY_V1 CAPS1 16 4
FIELD BDT_ENTRY_V1 IRQ_ROUTE_OFFSET 20 2
FIELD BDT_ENTRY_V1 IRQ_ROUTE_COUNT 22 2
FIELD BDT_ENTRY_V1 MMIO_BASE 24 8
FIELD BDT_ENTRY_V1 MMIO_SIZE 32 4
FIELD BDT_ENTRY_V1 IO_PORT_BASE 36 4
FIELD BDT_ENTRY_V1 IO_PORT_SIZE 40 2
FIELD BDT_ENTRY_V1 BLOCK_SECTOR_SIZE 42 2
FIELD BDT_ENTRY_V1 CAI_QUEUE_COUNT 44 2
FIELD BDT_ENTRY_V1 CAI_DOORBELL_OFFSET 46 2
FIELD BDT_ENTRY_V1 AUX_PTR 48 8
FIELD BDT_ENTRY_V1 AUX_SIZE 56 4
FIELD BDT_ENTRY_V1 AUX_TYPE 60 2
FIELD BDT_ENTRY_V1 RESERVED0 62 2

STRUCT BDT_IRQ_ROUTE_V1 8 2
FIELD BDT_IRQ_ROUTE_V1 DOMAIN_ID 0 2
FIELD BDT_IRQ_ROUTE_V1 IRQ_LINE 2 2
FIELD BDT_IRQ_ROUTE_V1 FLAGS 4 2
FIELD BDT_IRQ_ROUTE_V1 RESERVED0 6 2

STRUCT BDT_FOOTER_V1 4 4
FIELD BDT_FOOTER_V1 CRC32 0 4

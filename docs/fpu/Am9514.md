# Am9514 (P3) - Vector/SIMD Tier

This document summarizes the Project Carbon **Am9514 P3** personality implemented
inside the shared Am95xx accelerator.

## Status and identity

- Presented tier: **P3 (Am9514)**.
- Feature bit: `AM9514_VECTOR`.
- Enabled via CAI per-descriptor mode override or CSR default mode.

## Vector model (v1)

- 128-bit vector element width.
- Lane counts:
  - FP16 / BF16: 8 lanes
  - FP32: 4 lanes
- Masking:
  - `submit_desc.format_flags[0]` enables masking.
  - `submit_desc.flags[31:16]` holds per-lane mask bits (1 = active, 0 = passthrough).
  - Masked lanes pass through `op0` unchanged.

## Implemented operations (v1)

- `ADD/SUB/MUL/FMA` (FP16/BF16/FP32 lanes)
- `MIN/MAX` (numeric compare on lane data)
- `CMP` (produces all-ones mask for equal lanes, else zero)
- `CONV` (lane-wise conversion using `format_aux` as source format)
- `SHUF_SWAP` (lane swap, pairs) and `SHUF_BCAST` (lane0 broadcast)

## Exception and rounding behavior

- Rounding mode comes from the per-context rounding mode CSR.
- Exception flags are **aggregated across lanes** (bitwise OR).
- No per-lane flag storage is implemented in v1.

## Deferred / TODO

- Reductions (sum/min/max), wider permutes, and gather/scatter.
- Per-lane exception reporting.
- Vector register file exposure beyond CAI memory buffers.

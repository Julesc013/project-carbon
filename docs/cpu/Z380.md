# Z380 Core (P6 Z380)

## Presentation
- Presented CPU tier: P6 (Z380)
- Feature bit: `CARBON_Z380_32BIT_EXTENDED`

## Mode and Tier Behavior
- Reset enters P0 (8080 semantics).
- Tier changes only via MODEUP (monotonic upgrade) and RETMD (deterministic return).
- Hosting: P0 = 8080, P1 = 8085, P2 = Z80, P3 = Z180, P4 = eZ80 ADL framework, P5 = Z280 framework, P6 = Z380.
- Unsupported or unimplemented opcodes trap to the core illegal-instruction cause.

## Z380 Mode Semantics
- Native mode enables Z380-only instruction decoding.
- Extended mode widens addressing using the `ADDR_HI` CSR (32-bit address space).
- Longword mode enables 32-bit data-path operations where implemented.
- IM2 supports optional 16-bit vectors via the `VEC_BASE` CSR when enabled.

## Register Banks
- Two register banks are implemented for fast context switching.
- Bank select/index are CSR-programmable; banked registers are 32-bit.

## Implemented vs Trapped
- Implemented: mode control, register banking, 32-bit addressing, basic mul/div, and IM2 vectoring support.
- Trapped: unimplemented eZ80/Z280/Z380 opcodes and extended behaviors beyond the current subset.

## R Register Policy
- Low 7 bits increment on each opcode/prefix fetch; bit 7 is preserved.

## I/O Ordering
- I/O fabric transactions are ordered and uncached (IO space attribute set; cacheable bit clear).

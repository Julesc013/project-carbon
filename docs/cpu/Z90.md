# Z90 Core (P3 Z180-class)

## Presentation
- Presented CPU tier: P3 (Z180-class)
- Feature bit: `CARBON_Z90_Z180_CLASS`

## Mode and Tier Behavior
- Reset enters P0 (8080 semantics).
- Tier changes only via MODEUP (monotonic upgrade) and RETMD (deterministic return).
- Tier legality: P0 = 8080 subset, P1 = 8085 additions, P2 = Z80, P3 = Z180-class.
- P1 RIM/SIM are deterministic stubs (RIM returns 0; SIM has no side effects).
- P3-only opcodes trap when executed in P0â€“P2.
- Unsupported opcodes trap to the core illegal-instruction cause.

## Z180-Class Additions Implemented
- IN0/OUT0 (ED 00/01 class).
- MLT rr (ED 4C/5C/6C/7C).
- TST r/(HL)/n and TSTIO (C) (ED 04 class, ED 64, ED 74).
- OTIM/OTDM/OTIMR/OTDMR block out operations (ED 83/8B/93/9B).
- SLP (ED 76) enters HALT.
- Unassigned ED opcodes execute as deterministic NOPs (no side effects).

## R Register Policy
- Low 7 bits increment on each opcode/prefix fetch; bit 7 is preserved.

## I/O Ordering
- I/O fabric transactions are ordered and uncached (IO space attribute set; cacheable bit clear).
